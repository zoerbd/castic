{% extends 'index.html' %}
{% block content  %}
                <script>
                        $(document).ready(function(){
                                $('.status').mouseover(function(){
                                        $(this).css('background-color', '#ecf1df');
                                        $(this).css('padding', '10px');
                                        $(this).css('border-radius', '10px');
                                })
                                $('.status').mouseout(function(){
                                        $(this).css('background-color', 'white');
                                        $(this).css('padding', '0px');
                                })
                                if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
                                        $('.sidenav').css('display', 'none');
                                        $('#main').css('width', '100%');
                                        $('#main').css('margin-left', '0');
                                        $('.title').css('margin-top', '20%');
                                        $('#biglogo').css('width', '80%');
                                        $('#biglogo').css('height', '80%');
                                }
                        })
                </script>
		<div class="sidenav">
                    <a href="/update" style="color:green" class="showlink">Check backups</a>
		    <br>
                    <a href="#main">General information</a>
		    {% for repo in repos  %}
                    <a href="#{{repo.name}}">{{repo.name}}</a>
		    {% endfor  %}
                </div>
		<br>
                <main>
                <div class="container-fluid container">
                             <section>
                                <h2>General information: </h2>
                                <br>				
				<p>Hostname: {{general.hostname}}</p>
				<p>Storage path: {{general.path}}</p>
				<p>Available space: {{general.space}}</p>
				<p>Last check: {{general.lastCheck}}</p>
				{% if general.status  %}
                                <p>Overall status: <span id="ostatus" class="status" >healthy</span></p>
				{% else  %}
                                <p>Overall status: <span id="ostatus" class="status" >unhealthy</span></p>
				{% endif  %}
				{% load static  %}
                            </section>
			{% for repo in repos  %}
                        <section>
                                <p>Name: {{ repo.name }}</p>
                                <p>Absolute path: {{repo.absolPath}}</p>
                                {% if repo.health %}
                                        <p>Status: <span class="status">healthy</span></p>
                                {% else %}
                                        <p>Status: <span style="color:red">not healthy</span></p>
                                {% endif %}
                                <p>Used disk space: {{repo.diskSpace}}</p>
                                <p>Last update: {{repo.lastUpdate}}</p>
                                <p><a href="{{repo.snapshotsURI}}" class="showlink">Show snapshots</a></p>
                        </section>
        		<br>
			{% endfor  %}
                </div>
        </main>
{% endblock  %}
